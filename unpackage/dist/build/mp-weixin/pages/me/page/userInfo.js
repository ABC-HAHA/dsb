(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/page/userInfo"],{"162b":function(e,t,o){"use strict";o.r(t);var n=o("f450"),s=o.n(n);for(var r in n)"default"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r);t["default"]=s.a},"1cb8":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},s=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return s})},"35c1":function(e,t,o){"use strict";o.r(t);var n=o("1cb8"),s=o("162b");for(var r in s)"default"!==r&&function(e){o.d(t,e,function(){return s[e]})}(r);o("3aed");var a=o("2877"),i=Object(a["a"])(s["default"],n["a"],n["b"],!1,null,"7522d29c",null);t["default"]=i.exports},"3aed":function(e,t,o){"use strict";var n=o("bde8"),s=o.n(n);s.a},bde8:function(e,t,o){},f450:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("4179"));function s(e){return e&&e.__esModule?e:{default:e}}var r=function(){return Promise.all([o.e("common/vendor"),o.e("pages/components/resetInfo")]).then(o.bind(null,"51a9"))},a={components:{resetInfo:r},data:function(){return{showDialog:!1,dialogTitle:"修改头像",showPhoto:!1,showSex:!1,isLogin:this.$store.state.isLogin}},onLoad:function(){var t=this,o="";o=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.request({url:n.default.HTTP+"/user/userpersonalinfo",method:"POST",data:{id:o},success:function(o){t.$store.dispatch("userInfo",o.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(o.data.user),success:function(e){console.log(e)}})}})},computed:{boy:function(){return 1===this.userInfo.sex},phone:function(){var e=String(this.userInfo.mobile);return e?e.substr(0,3)+"****"+e.substr(7):"未绑定"},userInfo:function(){return this.$store.state.userInfo},hasQQ:function(){return"未绑定"!==this.userInfo.qqNumber},hasWechat:function(){return"未绑定"!==this.userInfo.wechatNumber},urlHttp:function(){return n.default.UrlHttp}},methods:{changeLogo:function(){this.dialogTitle="修改头像",this.showDialog=!0,this.showPhoto=!0,this.showSex=!1},changeSex:function(){this.dialogTitle="修改性别",this.showDialog=!0,this.showSex=!0,this.showPhoto=!1},closeDialog:function(e){this.showDialog=e},getSex:function(e){this.userInfo.sex=e},bindQQ:function(){var t=this,o="";o=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.login({provider:"qq",success:function(s){e.getUserInfo({provider:"qq",success:function(s){e.setStorageSync("qqopenid",s.userInfo.openId),e.request({url:n.default.HTTP+"/Callback/appqqbind",method:"POST",data:{uid:o,nickname:s.userInfo.nickName,gender:s.userInfo.gender,province:s.userInfo.province,city:s.userInfo.city,year:s.userInfo.year,headimgurl:s.userInfo.headimgurl,openid:s.userInfo.openId},success:function(o){0===o.data.code?(t.$store.dispatch("userInfo",o.data.user),e.setStorageSync("user",o.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(o.data.user),success:function(e){console.log(e)}}),e.showToast({title:"绑定成功"})):1===o.data.code&&e.showToast({title:o.data.error,icon:"none"})}})}})}})},bindWX:function(){var t=this,o=JSON.parse(e.getStorageSync("userInfo")).id;e.showLoading({title:"正在登录...",mask:!0}),e.login({provider:"weixin",success:function(s){e.getUserInfo({provider:"weixin",success:function(s){e.setStorageSync("openid",s.userInfo.unionId),e.request({url:n.default.HTTP+"/Callback/appwxbind",method:"POST",data:{uid:o,country:s.userInfo.country,nickname:s.userInfo.nickName,gender:s.userInfo.gender,province:s.userInfo.province,city:s.userInfo.city,headimgurl:s.userInfo.avatarUrl,unionid:s.userInfo.unionId},success:function(o){e.hideLoading(),0===o.data.code?(e.setStorageSync("user",o.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(o.data.user),success:function(e){console.log(e)}}),e.showToast({title:"绑定成功"}),t.$store.dispatch("userInfo",o.data.user)):1===o.data.code&&e.showToast({title:o.data.error,icon:"none"})}})}})}})},removeQQ:function(){var t=this,o="";o=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.request({url:n.default.HTTP+"/Callback/appqqUnbind",method:"POST",data:{uid:o},success:function(o){0===o.data.code?(t.$store.dispatch("userInfo",o.data.user),e.setStorageSync("user",o.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(o.data.user),success:function(e){console.log(e)}}),e.showToast({title:"解绑成功"})):1===o.data.code&&e.showToast({title:o.data.error,icon:"none"})}})},removeWX:function(){var t=this,o="";o=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.request({url:n.default.HTTP+"/Callback/appwxUnbind",method:"POST",data:{uid:o},success:function(o){0===o.data.code?(t.$store.dispatch("userInfo",o.data.user),e.setStorageSync("user",o.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(o.data.user),success:function(e){console.log(e)}}),e.showToast({title:"解绑成功"})):1===o.data.code&&e.showToast({title:o.data.error,icon:"none"})}})}}};t.default=a}).call(this,o("543d")["default"])}},[["d21d","common/runtime","common/vendor"]]]);