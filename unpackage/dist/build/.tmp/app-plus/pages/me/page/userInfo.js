(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/page/userInfo"],{"17ed":function(e,t,n){"use strict";n.r(t);var o=n("a9ce"),s=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=s.a},"1e98":function(e,t,n){"use strict";var o,s=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o})},"3d6d":function(e,t,n){"use strict";(function(e){n("62b9"),n("921b");o(n("66fd"));var t=o(n("8752"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"5e9b":function(e,t,n){"use strict";var o=n("7512"),s=n.n(o);s.a},7512:function(e,t,n){},8752:function(e,t,n){"use strict";n.r(t);var o=n("1e98"),s=n("17ed");for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);n("5e9b");var r,u=n("f0c5"),i=Object(u["a"])(s["default"],o["b"],o["c"],!1,null,"65132f42",null,!1,o["a"],r);t["default"]=i.exports},a9ce:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(n("f9ec"));function a(e){return e&&e.__esModule?e:{default:e}}var r=function(){return Promise.all([n.e("common/vendor"),n.e("pages/components/resetInfo")]).then(n.bind(null,"db95"))},u={components:{resetInfo:r},data:function(){return{showDialog:!1,dialogTitle:"修改头像",showPhoto:!1,showSex:!1,isLogin:this.$store.state.isLogin}},onLoad:function(){var t=this,n="";n=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.request({url:s.default.HTTP+"/user/userpersonalinfo",method:"POST",data:{id:n},success:function(n){t.$store.dispatch("userInfo",n.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(n.data.user),success:function(e){o("log",e," at pages\\me\\page\\userInfo.vue:89")}})}})},computed:{boy:function(){return 1===this.userInfo.sex},phone:function(){var e=String(this.userInfo.mobile);return e?e.substr(0,3)+"****"+e.substr(7):"未绑定"},userInfo:function(){return this.$store.state.userInfo},hasQQ:function(){return"未绑定"!==this.userInfo.qqNumber},hasWechat:function(){return"未绑定"!==this.userInfo.wechatNumber},urlHttp:function(){return s.default.UrlHttp}},methods:{changeLogo:function(){this.dialogTitle="修改头像",this.showDialog=!0,this.showPhoto=!0,this.showSex=!1},changeSex:function(){this.dialogTitle="修改性别",this.showDialog=!0,this.showSex=!0,this.showPhoto=!1},closeDialog:function(e){this.showDialog=e},getSex:function(e){this.userInfo.sex=e},bindQQ:function(){var t=this,n="";n=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.login({provider:"qq",success:function(a){e.getUserInfo({provider:"qq",success:function(a){e.setStorageSync("qqopenid",a.userInfo.openId),e.request({url:s.default.HTTP+"/Callback/appqqbind",method:"POST",data:{uid:n,nickname:a.userInfo.nickName,gender:a.userInfo.gender,province:a.userInfo.province,city:a.userInfo.city,year:a.userInfo.year,headimgurl:a.userInfo.headimgurl,openid:a.userInfo.openId},success:function(n){0===n.data.code?(t.$store.dispatch("userInfo",n.data.user),e.setStorageSync("user",n.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(n.data.user),success:function(e){o("log",e," at pages\\me\\page\\userInfo.vue:193")}}),e.showToast({title:"绑定成功"})):1===n.data.code&&e.showToast({title:n.data.error,icon:"none"})}})}})}})},bindWX:function(){var t=this,n=JSON.parse(e.getStorageSync("userInfo")).id;e.showLoading({title:"正在登录...",mask:!0}),e.login({provider:"weixin",success:function(a){e.getUserInfo({provider:"weixin",success:function(a){e.setStorageSync("openid",a.userInfo.unionId),e.request({url:s.default.HTTP+"/Callback/appwxbind",method:"POST",data:{uid:n,country:a.userInfo.country,nickname:a.userInfo.nickName,gender:a.userInfo.gender,province:a.userInfo.province,city:a.userInfo.city,headimgurl:a.userInfo.avatarUrl,unionid:a.userInfo.unionId},success:function(n){e.hideLoading(),0===n.data.code?(e.setStorageSync("user",n.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(n.data.user),success:function(e){o("log",e," at pages\\me\\page\\userInfo.vue:248")}}),e.showToast({title:"绑定成功"}),t.$store.dispatch("userInfo",n.data.user)):1===n.data.code&&e.showToast({title:n.data.error,icon:"none"})}})}})}})},removeQQ:function(){var t=this,n="";n=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.request({url:s.default.HTTP+"/Callback/appqqUnbind",method:"POST",data:{uid:n},success:function(n){0===n.data.code?(t.$store.dispatch("userInfo",n.data.user),e.setStorageSync("user",n.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(n.data.user),success:function(e){o("log",e," at pages\\me\\page\\userInfo.vue:292")}}),e.showToast({title:"解绑成功"})):1===n.data.code&&e.showToast({title:n.data.error,icon:"none"})}})},removeWX:function(){var t=this,n="";n=this.isLogin?JSON.parse(e.getStorageSync("userInfo")).id:0,e.request({url:s.default.HTTP+"/Callback/appwxUnbind",method:"POST",data:{uid:n},success:function(n){0===n.data.code?(t.$store.dispatch("userInfo",n.data.user),e.setStorageSync("user",n.data.user),e.setStorage({key:"userInfo",data:JSON.stringify(n.data.user),success:function(e){o("log",e," at pages\\me\\page\\userInfo.vue:331")}}),e.showToast({title:"解绑成功"})):1===n.data.code&&e.showToast({title:n.data.error,icon:"none"})}})}}};t.default=u}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["3d6d","common/runtime","common/vendor"]]]);