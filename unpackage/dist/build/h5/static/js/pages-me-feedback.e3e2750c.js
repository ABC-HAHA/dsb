(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-me-feedback"],{1661:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("751a"),a=r(i("d348"));function r(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{placeholder:"请您详细描述问题发生的场景和现象,并添加截图,这样有助于我们快速解决您的问题",imgArr:[],per:1,intro:"",phone:"",errInput:!1,errTextarea:!1,isSure:!1,isLogin:this.$store.state.isLogin}},methods:{introCheck:function(){this.intro?this.errTextarea=!1:this.errTextarea=!0},phoneCheck:function(){this.phone?this.errInput=!1:this.errInput=!0},addImg:function(){var e=this;this.isLogin&&JSON.parse(uni.getStorageSync("userInfo")).id,uni.chooseImage({count:3,sourceType:["album"],success:function(t){e.imgArr=t.tempFilePaths;for(var i=[],r=function(e){(0,n.pathToBase64)(t.tempFilePaths[e]).then(function(t){i[e]=t})},o=0;o<t.tempFilePaths.length;o++)r(o);setTimeout(function(){uni.request({url:a.default.HTTP+"/user/upload_multi",method:"POST",data:{images:i},success:function(t){e.per=100,e.imgArr=t.data.path}})},500);var s=setInterval(function(){e.per<61?e.per=e.per+30:e.per>=61&&e.per<100&&(e.per=94,clearInterval(s))},500)}})},sure:function(e){var t=this;if(this.intro)if(this.phone){this.errInput=!1,this.isSure=!0;var i="";i=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.request({url:a.default.HTTP+"/user/userfeedback",method:"POST",data:{picpath:this.imgArr,uid:i,content:this.intro,contact:this.phone},success:function(e){t.isSure=!1,0===e.data.code?(uni.showToast({title:"提交成功"}),t.intro="",t.imgArr=[],t.phone=""):uni.showToast({title:e.data.error,icon:"none"})}})}else this.errInput=!0;else this.errTextarea=!0}},computed:{imgurl:function(){if(100!==this.per)return this.imgArr;for(var e=[],t=0;t<this.imgArr.length;t++)e[t]=a.default.UrlHttp+this.imgArr[t];return e}}};t.default=o},"321c":function(e,t,i){var n=i("b4b5");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("9ee7fa4a",n,!0,{sourceMap:!1,shadowMode:!1})},"5f4b":function(e,t,i){"use strict";i.r(t);var n=i("1661"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,function(){return n[e]})}(r);t["default"]=a.a},"751a":function(e,t,i){"use strict";function n(e){return new Promise(function(t,i){if("object"===typeof window&&"document"in window){var n=document.createElement("canvas"),a=n.getContext("2d"),r=new Image;return r.onload=function(){n.width=r.width,n.height=r.height,a.drawImage(r,0,0),t(n.toDataURL())},r.onerror=i,void(r.src=e)}if("object"!==typeof plus)"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){i(e)}}):i(new Error("not support"));else{var o=new plus.nativeObj.Bitmap("bitmap"+Date.now());o.load(e,function(){try{var e=o.toBase64Data()}catch(n){i(n)}o.clear(),t(e)},function(e){o.clear(),i(e)})}})}function a(e){return new Promise(function(t,i){if("object"===typeof window&&"document"in window){e=e.split(",");var n=e[0].match(/:(.*?);/)[1],a=atob(e[1]),r=a.length,o=new Uint8Array(r);while(r--)o[r]=a.charCodeAt(r);return t((window.URL||window.webkitURL).createObjectURL(new Blob([o],{type:n})))}var s=e.match(/data\:\S+\/(\S+);/);s?s=s[1]:i(new Error("base64 error"));var d=Date.now()+"."+s;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+d;wx.getFileSystemManager().writeFile({filePath:u,data:e.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){t(u)},fail:function(e){i(e)}})}else i(new Error("not support"));else{var c=new plus.nativeObj.Bitmap("bitmap"+Date.now());c.loadBase64Data(e,function(){var e="_doc/uniapp_temp/"+d;c.save(e,{},function(){c.clear(),t(e)},function(e){c.clear(),i(e)})},function(e){c.clear(),i(e)})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=n,t.base64ToPath=a},7974:function(e,t,i){"use strict";i.r(t);var n=i("de68"),a=i("5f4b");for(var r in a)"default"!==r&&function(e){i.d(t,e,function(){return a[e]})}(r);i("a0aa");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"662b7b53",null);t["default"]=s.exports},a0aa:function(e,t,i){"use strict";var n=i("321c"),a=i.n(n);a.a},b4b5:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.feedback[data-v-662b7b53]{font-size:%?28?%;color:#666}.feedback .top[data-v-662b7b53]{width:92%;margin:%?20?% auto}.feedback .top .input uni-textarea[data-v-662b7b53]{width:100%;height:%?300?%;border:%?1?% solid #eee;-webkit-border-radius:%?20?%;border-radius:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 %?6?% #999;box-shadow:0 0 %?6?% #999;padding:%?20?%;margin-top:%?20?%;caret-color:#bd3037}.feedback .top .input .error[data-v-662b7b53]{border:%?1?% solid red;-webkit-box-shadow:0 0 %?20?% red;box-shadow:0 0 %?20?% red}.feedback .img-box[data-v-662b7b53]{width:92%;margin:%?20?% auto}.feedback .img-box uni-image[data-v-662b7b53]{width:%?142?%;height:%?142?%;-webkit-border-radius:%?12?%;border-radius:%?12?%}.feedback .img-box .img-item[data-v-662b7b53]{display:inline-block;width:auto;border:%?1?% solid #eee;position:relative;z-index:1;margin:%?20?% %?10?%}.feedback .img-box .img-item .mask[data-v-662b7b53]{position:absolute;top:0;left:0;z-index:10;width:100%;height:100%;background-color:rgba(0,0,0,.3)}.feedback .img-box .img-item .mask .progress[data-v-662b7b53]{width:50%;margin-top:%?68?%;margin-left:25%}.feedback .phone[data-v-662b7b53]{width:92%;margin:%?20?% auto;line-height:%?84?%}.feedback .phone uni-input[data-v-662b7b53]{display:inline-block;width:60%;border:%?1?% solid #ccc;-webkit-border-radius:%?16?%;border-radius:%?16?%;padding:%?10?% %?20?%;vertical-align:middle;caret-color:#bd3037}.feedback .phone .error[data-v-662b7b53]{border:%?1?% solid red;-webkit-box-shadow:0 0 %?20?% red;box-shadow:0 0 %?20?% red}.feedback .btn[data-v-662b7b53]{width:100%;text-align:center;margin-top:%?40?%}.feedback .btn uni-button[data-v-662b7b53]{display:inline-block;width:%?280?%;height:%?78?%;line-height:%?78?%;-webkit-border-radius:%?50?%;border-radius:%?50?%;border:none;color:#fff;background-color:#bd3037;-webkit-box-shadow:%?4?% %?4?% %?8?% #999;box-shadow:%?4?% %?4?% %?8?% #999}.feedback .btn .gray[data-v-662b7b53]{-webkit-box-shadow:none;box-shadow:none}.feedback .tips[data-v-662b7b53]{width:92%;margin:%?10?% auto;font-size:%?24?%;color:red}',""])},d348:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={HTTP:"https://xs.it-xd.cn/api",UrlHttp:"https://xs.it-xd.cn",ImgUrl:"https://xs.it-xd.cn"};t.default=n},de68:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"feedback"},[i("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.sure(t)}}},[i("v-uni-view",{staticClass:"top"},[i("v-uni-text",[e._v("问题描述或建议")]),i("v-uni-view",{staticClass:"input"},[i("v-uni-textarea",{class:{error:e.errTextarea},attrs:{placeholder:e.placeholder,"placeholder-style":"color: #aaa"},on:{blur:function(t){t=e.$handleEvent(t),e.introCheck(t)}},model:{value:e.intro,callback:function(t){e.intro=t},expression:"intro"}})],1)],1),i("v-uni-view",{staticClass:"img-box"},[i("v-uni-text",[e._v("上传图片")]),i("v-uni-view",{staticClass:"img"},[e._l(e.imgurl,function(t,n){return e.imgArr?i("v-uni-view",{key:n,staticClass:"img-item"},[i("v-uni-image",{attrs:{src:t}}),100!==e.per?i("v-uni-view",{staticClass:"mask"},[i("v-uni-progress",{staticClass:"progress",attrs:{percent:e.per,"stroke-width":"4"}})],1):e._e()],1):e._e()}),i("v-uni-image",{attrs:{src:"../../static/add.png"},on:{click:function(t){t=e.$handleEvent(t),e.addImg(t)}}})],2)],1),i("v-uni-view",{staticClass:"phone"},[i("v-uni-text",[e._v("联系方式：")]),i("v-uni-input",{class:{error:e.errInput},attrs:{type:"text"},on:{blur:function(t){t=e.$handleEvent(t),e.phoneCheck(t)}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),i("v-uni-view",{staticClass:"tips"},[i("v-uni-text",[e._v("请填写正确的联系方式，方便我们随时向您反馈结果")])],1),i("v-uni-view",{staticClass:"btn"},[i("v-uni-button",{class:{gray:e.isSure},attrs:{"form-type":"submit",loading:e.isSure,disabled:e.isSure}},[e._v("提交")])],1)],1)],1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})}}]);