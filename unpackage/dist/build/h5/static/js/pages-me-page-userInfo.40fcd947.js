(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-me-page-userInfo"],{"1f59":function(e,t,n){"use strict";n.r(t);var i=n("c6e1"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=o.a},"2a98":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.user-info .item[data-v-43657142]{width:92%;margin:%?20?% auto;overflow:hidden;font-size:%?32?%;padding:%?4?% %?10?%;height:%?72?%;line-height:%?72?%;border-bottom:%?1?% solid #aaa}.user-info .item .logo[data-v-43657142]{display:inline-block}.user-info .item .logo uni-image[data-v-43657142]{width:%?72?%;height:%?72?%;-webkit-border-radius:50%;border-radius:50%}.user-info .item .fr[data-v-43657142]{color:#999}.user-info .item .reset[data-v-43657142]{display:inline-block;height:%?40?%;padding:0 %?6?%;line-height:%?40?%;margin-left:%?20?%;margin-top:%?6?%;border:%?1?% solid #bd3037;-webkit-border-radius:%?20?%;border-radius:%?20?%;color:#bd3037;font-size:%?24?%}',""])},"2bb8":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"user-info"},[n("v-uni-view",{staticClass:"item",on:{click:function(t){t=e.$handleEvent(t),e.changeLogo()}}},[n("v-uni-text",{staticClass:"fl"},[e._v("头像")]),n("v-uni-text",{staticClass:"fr icon icon-next"}),n("v-uni-view",{staticClass:"fr logo"},[n("v-uni-image",{attrs:{src:e.urlHttp+e.userInfo.headimgurl}})],1)],1),n("v-uni-navigator",{staticClass:"item",attrs:{url:"resetName"}},[n("v-uni-text",{staticClass:"fl"},[e._v("昵称")]),n("v-uni-text",{staticClass:"fr icon icon-next"}),n("v-uni-text",{staticClass:"fr"},[e._v(e._s(e.userInfo.username))])],1),n("v-uni-view",{staticClass:"item",on:{click:function(t){t=e.$handleEvent(t),e.changeSex()}}},[n("v-uni-text",{staticClass:"fl"},[e._v("性别")]),n("v-uni-text",{staticClass:"fr icon icon-next"}),e.boy?n("v-uni-text",{staticClass:"fr icon icon-male"}):n("v-uni-text",{staticClass:"fr icon icon-female"})],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-text",{staticClass:"fl"},[e._v("手机号")]),e.userInfo.mobile?n("v-uni-navigator",{staticClass:"fr reset",attrs:{url:"resetPhone"}},[e._v("修改绑定")]):e._e(),e.userInfo.mobile?e._e():n("v-uni-navigator",{staticClass:"fr reset",attrs:{url:"../../common/register"}},[e._v("去绑定")]),n("v-uni-text",{staticClass:"fr"},[e._v(e._s(e.phone))])],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-text",{staticClass:"fl"},[e._v("QQ")]),e.hasQQ?n("v-uni-text",{staticClass:"fr reset",on:{click:function(t){t=e.$handleEvent(t),e.removeQQ(t)}}},[e._v("解除绑定")]):e._e(),e.hasQQ?e._e():n("v-uni-text",{staticClass:"fr reset",on:{click:function(t){t=e.$handleEvent(t),e.bindQQ(t)}}},[e._v("去绑定")]),n("v-uni-text",{staticClass:"fr"},[e._v(e._s(e.userInfo.qqNumber))])],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-text",{staticClass:"fl"},[e._v("微信")]),e.hasWechat?n("v-uni-text",{staticClass:"fr reset",on:{click:function(t){t=e.$handleEvent(t),e.removeWX(t)}}},[e._v("解除绑定")]):e._e(),e.hasWechat?e._e():n("v-uni-text",{staticClass:"fr reset",on:{click:function(t){t=e.$handleEvent(t),e.bindWX(t)}}},[e._v("去绑定")]),n("v-uni-text",{staticClass:"fr"},[e._v(e._s(e.userInfo.wechatNumber))])],1),n("reset-info",{attrs:{isShow:e.showDialog,title:e.dialogTitle,logo:e.showPhoto,sex:e.showSex},on:{closeDialog:function(t){t=e.$handleEvent(t),e.closeDialog(t)},getSex:function(t){t=e.$handleEvent(t),e.getSex(t)}}})],1)},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},"68d4":function(e,t,n){"use strict";n.r(t);var i=n("ec65"),o=n("a046");for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);n("7dda");var a=n("2877"),r=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,"0ebf1223",null);t["default"]=r.exports},"751a":function(e,t,n){"use strict";function i(e){return new Promise(function(t,n){if("object"===typeof window&&"document"in window){var i=document.createElement("canvas"),o=i.getContext("2d"),s=new Image;return s.onload=function(){i.width=s.width,i.height=s.height,o.drawImage(s,0,0),t(i.toDataURL())},s.onerror=n,void(s.src=e)}if("object"!==typeof plus)"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){n(e)}}):n(new Error("not support"));else{var a=new plus.nativeObj.Bitmap("bitmap"+Date.now());a.load(e,function(){try{var e=a.toBase64Data()}catch(i){n(i)}a.clear(),t(e)},function(e){a.clear(),n(e)})}})}function o(e){return new Promise(function(t,n){if("object"===typeof window&&"document"in window){e=e.split(",");var i=e[0].match(/:(.*?);/)[1],o=atob(e[1]),s=o.length,a=new Uint8Array(s);while(s--)a[s]=o.charCodeAt(s);return t((window.URL||window.webkitURL).createObjectURL(new Blob([a],{type:i})))}var r=e.match(/data\:\S+\/(\S+);/);r?r=r[1]:n(new Error("base64 error"));var u=Date.now()+"."+r;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var c=wx.env.USER_DATA_PATH+"/"+u;wx.getFileSystemManager().writeFile({filePath:c,data:e.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){t(c)},fail:function(e){n(e)}})}else n(new Error("not support"));else{var d=new plus.nativeObj.Bitmap("bitmap"+Date.now());d.loadBase64Data(e,function(){var e="_doc/uniapp_temp/"+u;d.save(e,{},function(){d.clear(),t(e)},function(e){d.clear(),n(e)})},function(e){d.clear(),n(e)})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=i,t.base64ToPath=o},"7dda":function(e,t,n){"use strict";var i=n("87b5"),o=n.n(i);o.a},8269:function(e,t,n){"use strict";var i=n("c694"),o=n.n(i);o.a},"87b5":function(e,t,n){var i=n("93ea");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("51393adb",i,!0,{sourceMap:!1,shadowMode:!1})},"93ea":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.reset-info[data-v-0ebf1223]{width:100%;height:100vh;position:fixed;top:0;left:0;background-color:rgba(0,0,0,.3);z-index:199}.reset-info .reset-info-box[data-v-0ebf1223]{width:80%;background-color:#fff;position:absolute;top:%?360?%;left:10%;z-index:999;font-size:%?42?%}.reset-info .reset-info-box .box-title[data-v-0ebf1223]{height:%?110?%;line-height:%?110?%;padding-left:%?20?%;border-bottom:%?1?% solid #ccc}.reset-info .reset-info-box .box-item[data-v-0ebf1223]{height:%?100?%;line-height:%?100?%;padding-left:%?20?%;border-bottom:%?1?% solid #ccc}.reset-info .reset-info-box .box-item .icon[data-v-0ebf1223]{font-size:%?40?%;color:#666}.reset-info .reset-info-box .box-item .icon[data-v-0ebf1223]:before{margin-right:%?10?%}',""])},a046:function(e,t,n){"use strict";n.r(t);var i=n("ad29"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=o.a},ad29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("d348")),o=n("751a");function s(e){return e&&e.__esModule?e:{default:e}}var a={props:["isShow","title","logo","sex"],data:function(){return{isLogin:this.$store.state.isLogin}},computed:{userInfo:function(){return this.$store.state.userInfo}},methods:{getPhoto:function(){var e=this,t="";t=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.chooseImage({count:1,sourceType:["album"],success:function(n){(0,o.pathToBase64)(n.tempFilePaths[0]).then(function(n){uni.request({url:i.default.HTTP+"/user/uploadheadimg",method:"POST",name:"file",data:{uid:t,image:n},success:function(t){console.log("上传头像",t),0===t.data.code?(e.$store.dispatch("userInfo",t.data.user),uni.setStorageSync("user",t.data.user)):uni.showToast({title:t.data.error,icon:"none"})}})})}})},getCamera:function(){var e=this,t="";t=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.chooseImage({sourceType:["camera"],success:function(n){var s=n.tempFilePaths[0];uni.saveImageToPhotosAlbum({filePath:s,success:function(){(0,o.pathToBase64)(s).then(function(n){uni.request({url:i.default.HTTP+"/user/uploadheadimg",method:"POST",name:"file",data:{uid:t,image:n},success:function(t){0===t.data.code?(e.$store.dispatch("userInfo",t.data.user),uni.setStorageSync("user",t.data.user)):uni.showToast({title:t.data.error,icon:"none"})}})})}})}})},chooseSex:function(e){var t=this,n="";n=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.request({url:i.default.HTTP+"/user/edituser",method:"POST",data:{id:n,sex:e},success:function(e){t.$store.dispatch("userInfo",e.data.user)}}),this.$emit("getSex",e),this.$emit("closeDialog",!1)},closeDialog:function(){this.$emit("closeDialog",!1)}}};t.default=a},c694:function(e,t,n){var i=n("2a98");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("9ba87fc8",i,!0,{sourceMap:!1,shadowMode:!1})},c6e1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("d348")),o=s(n("68d4"));function s(e){return e&&e.__esModule?e:{default:e}}var a={components:{resetInfo:o.default},data:function(){return{showDialog:!1,dialogTitle:"修改头像",showPhoto:!1,showSex:!1,isLogin:this.$store.state.isLogin}},onLoad:function(){var e=this,t="";t=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.request({url:i.default.HTTP+"/user/userpersonalinfo",method:"POST",data:{id:t},success:function(t){e.$store.dispatch("userInfo",t.data.user)}})},computed:{boy:function(){return 1===this.userInfo.sex},phone:function(){var e=String(this.userInfo.mobile);return e.substr(0,3)+"****"+e.substr(7)},userInfo:function(){return this.$store.state.userInfo},hasQQ:function(){return"未绑定"!==this.userInfo.qqNumber},hasWechat:function(){return"未绑定"!==this.userInfo.wechatNumber},urlHttp:function(){return i.default.UrlHttp}},methods:{changeLogo:function(){this.dialogTitle="修改头像",this.showDialog=!0,this.showPhoto=!0,this.showSex=!1},changeSex:function(){this.dialogTitle="修改性别",this.showDialog=!0,this.showSex=!0,this.showPhoto=!1},closeDialog:function(e){this.showDialog=e},getSex:function(e){this.userInfo.sex=e},bindQQ:function(){var e=this,t="";t=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.login({provider:"qq",success:function(n){uni.getUserInfo({provider:"qq",success:function(n){uni.setStorageSync("qqopenid",n.userInfo.openId),uni.request({url:i.default.HTTP+"/Callback/appqqbind",method:"POST",data:{uid:t,nickname:n.userInfo.nickName,gender:n.userInfo.gender,province:n.userInfo.province,city:n.userInfo.city,year:n.userInfo.year,headimgurl:n.userInfo.headimgurl,openid:n.userInfo.openId},success:function(t){0===t.data.code?(e.$store.dispatch("userInfo",t.data.user),uni.setStorageSync("user",t.data.user),uni.showToast({title:"绑定成功"})):1===t.data.code&&uni.showToast({title:t.data.error,icon:"none"})}})}})}})},bindWX:function(){var e=this,t=JSON.parse(uni.getStorageSync("userInfo")).id;uni.showLoading({title:"正在登录...",mask:!0}),uni.login({provider:"weixin",success:function(n){uni.getUserInfo({provider:"weixin",success:function(n){uni.setStorageSync("openid",n.userInfo.unionId),uni.request({url:i.default.HTTP+"/Callback/appwxbind",method:"POST",data:{uid:t,country:n.userInfo.country,nickname:n.userInfo.nickName,gender:n.userInfo.gender,province:n.userInfo.province,city:n.userInfo.city,headimgurl:n.userInfo.avatarUrl,unionid:n.userInfo.unionId},success:function(t){uni.hideLoading(),0===t.data.code?(e.$store.dispatch("userInfo",t.data.user),uni.setStorageSync("user",t.data.user),uni.showToast({title:"绑定成功"})):1===t.data.code&&uni.showToast({title:t.data.error,icon:"none"})}})}})}})},removeQQ:function(){var e=this,t="";t=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.request({url:i.default.HTTP+"/Callback/appqqUnbind",method:"POST",data:{uid:t},success:function(t){0===t.data.code?(e.$store.dispatch("userInfo",t.data.user),uni.setStorageSync("user",t.data.user),uni.showToast({title:"解绑成功"})):1===t.data.code&&uni.showToast({title:t.data.error,icon:"none"})}})},removeWX:function(){var e=this,t="";t=this.isLogin?JSON.parse(uni.getStorageSync("userInfo")).id:0,uni.request({url:i.default.HTTP+"/Callback/appwxUnbind",method:"POST",data:{uid:t},success:function(t){0===t.data.code?(e.$store.dispatch("userInfo",t.data.user),uni.setStorageSync("user",t.data.user),uni.showToast({title:"解绑成功"})):1===t.data.code&&uni.showToast({title:t.data.error,icon:"none"})}})}}};t.default=a},d348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={HTTP:"https://xs.it-xd.cn/api",UrlHttp:"https://xs.it-xd.cn",ImgUrl:"https://xs.it-xd.cn"};t.default=i},ec65:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isShow?n("v-uni-view",{staticClass:"reset-info",on:{click:function(t){t=e.$handleEvent(t),e.closeDialog()}}},[n("v-uni-view",{staticClass:"reset-info-box"},[n("v-uni-view",{staticClass:"box-title"},[n("v-uni-text",[e._v(e._s(e.title))])],1),e.logo?n("v-uni-view",{staticClass:"box-item",on:{click:function(t){t=e.$handleEvent(t),e.getPhoto()}}},[n("v-uni-text",{staticClass:"icon icon-photo"},[e._v("相册")])],1):e._e(),e.logo?n("v-uni-view",{staticClass:"box-item",on:{click:function(t){t=e.$handleEvent(t),e.getCamera()}}},[n("v-uni-text",{staticClass:"icon icon-camera"},[e._v("拍照")])],1):e._e(),e.sex?n("v-uni-view",{staticClass:"box-item",on:{click:function(t){t=e.$handleEvent(t),e.chooseSex(1)}}},[n("v-uni-text",{staticClass:"icon icon-male"})],1):e._e(),e.sex?n("v-uni-view",{staticClass:"box-item",on:{click:function(t){t=e.$handleEvent(t),e.chooseSex(2)}}},[n("v-uni-text",{staticClass:"icon icon-female"})],1):e._e()],1)],1):e._e()},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},fdb6:function(e,t,n){"use strict";n.r(t);var i=n("2bb8"),o=n("1f59");for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);n("8269");var a=n("2877"),r=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,"43657142",null);t["default"]=r.exports}}]);